"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const http_1 = require("http");
const https_1 = require("https");
const loadConfiguration_1 = __importDefault(require("./loadConfiguration"));
const configuration_1 = require("./configuration");
function buildRequest(requestPath, options = {}) {
    const configuration = (0, loadConfiguration_1.default)(options.requireApiKey);
    const serviceUrl = (0, configuration_1.getServiceUrl)(configuration, options.service || configuration_1.ServiceEndpoint.AppLandApi);
    const url = new URL(requestPath, serviceUrl);
    const requestFunction = url.protocol === 'https:' ? https_1.request : http_1.request;
    const headers = {
        Accept: 'application/json',
    };
    if (configuration.apiKey) {
        headers.authorization = `Bearer ${configuration.apiKey}`;
    }
    return { requestFunction, url, headers };
}
exports.default = buildRequest;
//# sourceMappingURL=buildRequest.js.map