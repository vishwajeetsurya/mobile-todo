"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const utils_1 = require("../utils");
class IterateCodeObjectMatcher {
    /**
     * Search code objects in the classMap, looking for matches to a spec.
     */
    constructor(type, pattern) {
        this.type = type;
        this.pattern = pattern;
    }
    matchClassMap(classMap) {
        const findMatchingCodeObject = (item, matches) => {
            if ((0, utils_1.verbose)())
                console.log(`${this.type} ${item.fqid}`);
            if (item.type === this.type) {
                const id = item.fqid.slice(item.fqid.indexOf(':') + 1);
                if (this.pattern.test(id)) {
                    if ((0, utils_1.verbose)())
                        console.log(`${this.pattern} matches ${item.fqid}`);
                    matches.push(item);
                }
            }
            if (item.children) {
                item.children.forEach((child) => {
                    child.parent = item;
                    findMatchingCodeObject(child, matches);
                });
            }
        };
        let matches = [];
        for (const item of classMap) {
            findMatchingCodeObject(item, matches);
        }
        return matches;
    }
}
exports.default = IterateCodeObjectMatcher;
//# sourceMappingURL=iterateCodeObjectMatcher.js.map