"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.detectRevision = void 0;
const executeCommand_1 = require("../../lib/executeCommand");
const ui_1 = require("./ui");
const ValidationError_1 = require("./ValidationError");
async function detectRevision() {
    return (await (0, executeCommand_1.executeCommand)(`git rev-parse HEAD`)).trim().split('\n')[0];
}
exports.detectRevision = detectRevision;
async function detectRevisions(baseRevision, headArg) {
    let headRevision = headArg;
    if (!headRevision) {
        let currentBranch = await detectRevision();
        headRevision = currentBranch;
    }
    console.log((0, ui_1.prominentStyle)(`Current revision is: ${headRevision}`));
    if (baseRevision === headRevision) {
        throw new ValidationError_1.ValidationError(`Base and head revisions are the same: ${baseRevision}`);
    }
    return { baseRevision, headRevision };
}
exports.default = detectRevisions;
//# sourceMappingURL=detectRevisions.js.map