"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const fs_extra_1 = require("fs-extra");
const promises_1 = require("fs/promises");
const path_1 = require("path");
const userInteraction_1 = __importDefault(require("../../userInteraction"));
async function saveAppMap({ configuration }, jsonData, appMapName) {
    const data = JSON.stringify(jsonData);
    const fileName = `${appMapName}.appmap.json`;
    const outputDir = (0, path_1.join)(configuration.configOption('appmap_dir', 'tmp/appmap'), 'remote');
    await (0, fs_extra_1.mkdirp)(outputDir);
    userInteraction_1.default.status = `Saving recording to ${fileName} in directory ${outputDir}`;
    await (0, promises_1.writeFile)((0, path_1.join)(outputDir, fileName), data);
    userInteraction_1.default.success('AppMap saved');
    return (0, path_1.join)(outputDir, fileName);
}
exports.default = saveAppMap;
//# sourceMappingURL=saveAppMap.js.map