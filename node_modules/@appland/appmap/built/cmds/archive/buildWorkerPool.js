"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const assert_1 = __importDefault(require("assert"));
const workerPool_1 = __importDefault(require("../../lib/workerPool"));
const path_1 = require("path");
const fs_1 = require("fs");
// This import is used to ensure that the packaging follows the dependency.
require('./analyzeWorkerWrapper');
const TEST_ENV_WORKER_FILE = (0, path_1.join)(__dirname, '../../../built/cmds/archive/analyzeWorkerWrapper.js');
const WORKER_FILE = (0, fs_1.existsSync)(TEST_ENV_WORKER_FILE)
    ? TEST_ENV_WORKER_FILE
    : (0, path_1.join)(__dirname, 'analyzeWorkerWrapper.js');
function buildWorkerPool(threadCount) {
    (0, assert_1.default)(WORKER_FILE);
    return new workerPool_1.default(WORKER_FILE, threadCount);
}
exports.default = buildWorkerPool;
//# sourceMappingURL=buildWorkerPool.js.map