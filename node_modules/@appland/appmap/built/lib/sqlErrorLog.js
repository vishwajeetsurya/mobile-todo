"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const promises_1 = require("fs/promises");
const SqlErrors = new Set();
const SqlParseErrorFileName = 'sql_warning.txt';
let SqlParseErrorFileOpened = false;
async function writeErrorToFile(error) {
    const flags = SqlParseErrorFileOpened ? 'a' : 'w';
    SqlParseErrorFileOpened = true;
    (0, promises_1.open)(SqlParseErrorFileName, flags).then((handle) => {
        handle.write([String(error), ''].join('\n')).finally(handle.close.bind(handle));
    });
}
function sqlErrorLog(parseError) {
    if (!SqlErrors.has(parseError.sql)) {
        writeErrorToFile(parseError);
        SqlErrors.add(parseError.sql);
    }
}
exports.default = sqlErrorLog;
//# sourceMappingURL=sqlErrorLog.js.map