"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const promises_1 = require("fs/promises");
const js_yaml_1 = require("js-yaml");
async function loadAppMapConfig(fileName = 'appmap.yml') {
    var _a;
    let appMapConfigData;
    try {
        appMapConfigData = await (0, promises_1.readFile)(fileName, 'utf-8');
    }
    catch (e) {
        return;
    }
    const appMapConfigAny = (0, js_yaml_1.load)(appMapConfigData);
    if (!appMapConfigAny && !(typeof appMapConfigAny === 'object'))
        return;
    const appMapConfig = appMapConfigAny;
    camelizeKeys((_a = appMapConfig === null || appMapConfig === void 0 ? void 0 : appMapConfig.compare) === null || _a === void 0 ? void 0 : _a.filter);
    return appMapConfig;
}
exports.default = loadAppMapConfig;
function camelizeKeys(obj) {
    if (!obj)
        return;
    for (const key of Object.keys(obj)) {
        const value = obj[key];
        const camelizedKey = key.replace(/_([\w])/g, (_, letter) => letter.toUpperCase());
        delete obj[key];
        obj[camelizedKey] = value;
    }
}
//# sourceMappingURL=loadAppMapConfig.js.map